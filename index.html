<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PMP + Agile Hangman — Project Health</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1b2d;
      --card2:#0c1626;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --border:rgba(148,163,184,0.18);
      --accent:#60a5fa;
      --good:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --radius:18px;
      --shadow: 0 18px 45px rgba(0,0,0,0.35);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(circle at 15% 10%, rgba(96,165,250,0.18), transparent 40%),
        radial-gradient(circle at 80% 30%, rgba(34,197,94,0.10), transparent 40%),
        radial-gradient(circle at 40% 90%, rgba(245,158,11,0.10), transparent 45%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{width:min(980px, 100%); display:grid; gap:14px;}
    .top{
      display:flex; flex-wrap:wrap; gap:12px;
      align-items:flex-end; justify-content:space-between;
    }
    h1{margin:0; letter-spacing:-0.02em; font-size: clamp(20px, 2.4vw, 30px);}
    .sub{color:var(--muted); margin-top:6px; line-height:1.35; font-size: 13px;}
    .pill{
      padding:8px 12px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(15,27,45,0.7);
      box-shadow: var(--shadow);
      font-size: 12px; color: var(--muted);
      display:flex; gap:10px; align-items:center;
      white-space:nowrap;
    }
    .pill b{color:var(--text)}
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap:14px;
    }
    .card{
      background: linear-gradient(180deg, rgba(15,27,45,0.88), rgba(12,22,38,0.88));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .card h2{
      margin:0 0 10px 0;
      font-size: 14px;
      letter-spacing:0.08em;
      text-transform: uppercase;
      color: var(--muted);
    }

    /* Word board */
    .word{
      display:flex; flex-wrap:wrap; gap:10px 12px;
      padding: 6px 2px 14px;
      align-items:center;
      min-height: 64px;
    }
    .tile{
      width: 34px; height: 44px;
      display:flex; align-items:center; justify-content:center;
      border-radius: 12px;
      border:1px solid rgba(148,163,184,0.22);
      background: rgba(2,6,23,0.25);
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.02em;
    }
    .tile.space{
      width: 14px; height: 44px;
      border: none; background: transparent;
    }
    .tile.punct{
      width: 22px; border:none; background: transparent;
      color: var(--muted);
    }

    .actions{
      display:flex; flex-wrap:wrap; gap:10px;
      align-items:center; justify-content:space-between;
    }
    button{
      cursor:pointer;
      border: 1px solid rgba(148,163,184,0.20);
      background: rgba(15,27,45,0.85);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 750;
      font-size: 13px;
      letter-spacing: 0.01em;
    }
    button:hover{ border-color: rgba(96,165,250,0.45); }
    button:disabled{ opacity:0.45; cursor:not-allowed; }

    .hint{
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      background: rgba(2,6,23,0.25);
      border: 1px dashed rgba(148,163,184,0.22);
      color: var(--muted);
      line-height: 1.4;
      font-size: 13px;
    }

    /* Keyboard */
    .kbd{
      display:grid;
      grid-template-columns: repeat(13, 1fr);
      gap:8px;
    }
    .key{
      border:1px solid rgba(148,163,184,0.18);
      background: rgba(2,6,23,0.22);
      border-radius: 12px;
      padding: 10px 0;
      text-align:center;
      font-weight: 850;
      font-size: 13px;
      user-select:none;
      cursor:pointer;
      color: var(--text);
    }
    .key:hover{ border-color: rgba(96,165,250,0.45); }
    .key.used{ opacity:0.35; cursor:not-allowed; }
    .key.good{ border-color: rgba(34,197,94,0.55); background: rgba(34,197,94,0.12); }
    .key.bad{ border-color: rgba(239,68,68,0.55); background: rgba(239,68,68,0.12); }

    /* Health meter */
    .meterWrap{ display:grid; gap:12px; }
    .meter{
      border:1px solid var(--border);
      border-radius: 16px;
      padding: 12px;
      background: rgba(2,6,23,0.25);
    }
    .meterTop{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .meterTop .label{ color: var(--muted); font-size: 12px; font-weight: 800; letter-spacing:0.08em; text-transform:uppercase; }
    .meterTop .state{ font-weight: 900; }
    .bar{
      height: 12px;
      border-radius: 999px;
      background: rgba(148,163,184,0.18);
      overflow:hidden;
      margin-top: 10px;
    }
    .fill{
      height:100%;
      width: 100%;
      background: linear-gradient(90deg, rgba(34,197,94,0.9), rgba(96,165,250,0.85));
      border-radius: 999px;
      transition: width .18s ease;
    }

    .statRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .stat{
      border:1px solid var(--border);
      border-radius: 16px;
      padding: 12px;
      background: rgba(2,6,23,0.20);
    }
    .stat .k{ color: var(--muted); font-size: 12px; font-weight: 800; letter-spacing:0.08em; text-transform:uppercase; }
    .stat .v{ font-size: 22px; font-weight: 950; margin-top:6px; }

    .toast{
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.20);
      background: rgba(15,27,45,0.75);
      color: var(--text);
      line-height: 1.35;
      font-size: 13px;
      display:none;
    }
    .toast.good{ border-color: rgba(34,197,94,0.35); }
    .toast.bad{ border-color: rgba(239,68,68,0.35); }

    @media (max-width: 920px){
      .grid{ grid-template-columns: 1fr; }
      .kbd{ grid-template-columns: repeat(10, 1fr); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>PMP + Agile Hangman <span style="color:var(--accent)">— Project Health</span></h1>
        <div class="sub">Guess the term. Learn the definition. Build a streak.</div>
      </div>
      <div class="pill">
        <span>Best Streak: <b id="bestStreak">0</b></span>
        <span>Current Streak: <b id="streak">0</b></span>
      </div>
    </div>

    <div class="grid">
      <!-- Left: game -->
      <div class="card">
        <h2>Guess the term</h2>
        <div class="word" id="word"></div>

        <div class="actions">
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="btnHint">Show hint</button>
            <button id="btnNew">New word</button>
          </div>
          <div style="color:var(--muted); font-size:12px;">
            Wrong guesses left: <b id="lives">6</b>
          </div>
        </div>

        <div class="hint" id="hint" style="display:none;"></div>
        <div class="toast" id="toast"></div>

        <div style="height:12px;"></div>
        <h2>Keyboard</h2>
        <div class="kbd" id="kbd"></div>
      </div>

      <!-- Right: status -->
      <div class="card">
        <h2>Project health</h2>
        <div class="meterWrap">
          <div class="meter">
            <div class="meterTop">
              <div class="label">Health meter</div>
              <div class="state" id="stateText">On Track</div>
            </div>
            <div class="bar"><div class="fill" id="fill"></div></div>
            <div style="margin-top:10px; color:var(--muted); font-size:12px; line-height:1.4;">
              Wrong guesses reduce health. Solve the term to keep the project green.
            </div>
          </div>

          <div class="statRow">
            <div class="stat">
              <div class="k">Score</div>
              <div class="v" id="score">0</div>
            </div>
            <div class="stat">
              <div class="k">Solved</div>
              <div class="v" id="solved">0</div>
            </div>
          </div>

          <div class="stat" style="grid-column: 1 / -1;">
            <div class="k">Category</div>
            <div class="v" style="font-size:16px; margin-top:10px;" id="category">PMP + Agile (Mixed)</div>
            <div class="sub" style="margin:8px 0 0;">Space = free. Hyphens/slashes show automatically.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // --- Step 1: Word bank (PMP + Agile mixed) ---
  // Each entry: term + hint. Keep phrases allowed.
  const BANK = [
    { term: "WORK BREAKDOWN STRUCTURE", hint: "A hierarchical decomposition of the total scope of work to accomplish project objectives and create deliverables (WBS)." },
    { term: "CRITICAL PATH", hint: "The sequence of activities that represents the longest path through a project, determining the shortest possible duration." },
    { term: "RISK REGISTER", hint: "A document where you record identified risks, analysis results, responses, owners, and status." },
    { term: "CHANGE CONTROL BOARD", hint: "A formally chartered group responsible for reviewing, evaluating, approving, delaying, or rejecting changes." },
    { term: "EARNED VALUE MANAGEMENT", hint: "A method that integrates scope, schedule, and cost to measure project performance and progress (EVM)." },
    { term: "SCOPE CREEP", hint: "Uncontrolled expansion to product or project scope without adjustments to time, cost, and resources." },
    { term: "PRODUCT BACKLOG", hint: "An ordered list of everything known to be needed in the product (Scrum)." },
    { term: "SPRINT RETROSPECTIVE", hint: "An event where the team inspects how the last sprint went and creates improvements for the next sprint." },
    { term: "DEFINITION OF DONE", hint: "A shared understanding of what it means for work to be complete, ensuring quality and transparency." },
    { term: "BURNDOWN CHART", hint: "A visual showing remaining work over time, commonly used in Agile/Scrum." },
    { term: "STAKEHOLDER ENGAGEMENT", hint: "The process of identifying stakeholders and managing expectations to ensure project success." },
    { term: "PROJECT CHARTER", hint: "A document issued by the sponsor that authorizes the project and provides the PM with authority to use resources." }
  ];

  // --- Game state ---
  const MAX_LIVES = 6;
  let lives = MAX_LIVES;
  let used = new Set();
  let answer = "";
  let revealed = new Set();
  let solvedCount = 0;
  let score = 0;
  let streak = 0;
  let bestStreak = Number(localStorage.getItem("pmpHangmanBestStreak") || 0);

  // --- Elements ---
  const wordEl = document.getElementById("word");
  const kbdEl = document.getElementById("kbd");
  const hintEl = document.getElementById("hint");
  const btnHint = document.getElementById("btnHint");
  const btnNew = document.getElementById("btnNew");
  const livesEl = document.getElementById("lives");
  const fillEl = document.getElementById("fill");
  const stateText = document.getElementById("stateText");
  const scoreEl = document.getElementById("score");
  const solvedEl = document.getElementById("solved");
  const streakEl = document.getElementById("streak");
  const bestStreakEl = document.getElementById("bestStreak");
  const toastEl = document.getElementById("toast");

  bestStreakEl.textContent = bestStreak;

  // --- Keyboard ---
  const ALPH = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
  function renderKeyboard(){
    kbdEl.innerHTML = "";
    ALPH.forEach(ch => {
      const d = document.createElement("div");
      d.className = "key";
      d.textContent = ch;
      d.addEventListener("click", () => onGuess(ch, d));
      kbdEl.appendChild(d);
    });
  }

  // --- Word render ---
  function renderWord(){
    wordEl.innerHTML = "";
    for (const ch of answer) {
      if (ch === " ") {
        const s = document.createElement("div");
        s.className = "tile space";
        wordEl.appendChild(s);
        continue;
      }
      // show punctuation automatically
      if (!/[A-Z]/.test(ch)) {
        const p = document.createElement("div");
        p.className = "tile punct";
        p.textContent = ch;
        wordEl.appendChild(p);
        continue;
      }
      const t = document.createElement("div");
      t.className = "tile";
      t.textContent = revealed.has(ch) ? ch : "";
      wordEl.appendChild(t);
    }
  }

  function updateHealth(){
    livesEl.textContent = lives;
    const pct = Math.max(0, lives / MAX_LIVES) * 100;
    fillEl.style.width = pct + "%";

    // status text
    if (lives >= 5) stateText.textContent = "On Track";
    else if (lives >= 3) stateText.textContent = "At Risk";
    else if (lives >= 1) stateText.textContent = "Critical";
    else stateText.textContent = "Failed";

    // make the bar color feel responsive (no CSS var changes needed)
    if (lives >= 5) fillEl.style.background = "linear-gradient(90deg, rgba(34,197,94,0.95), rgba(96,165,250,0.90))";
    else if (lives >= 3) fillEl.style.background = "linear-gradient(90deg, rgba(245,158,11,0.95), rgba(96,165,250,0.85))";
    else fillEl.style.background = "linear-gradient(90deg, rgba(239,68,68,0.95), rgba(245,158,11,0.85))";
  }

  function updateStats(){
    scoreEl.textContent = score;
    solvedEl.textContent = solvedCount;
    streakEl.textContent = streak;
    bestStreakEl.textContent = bestStreak;
  }

  function showToast(text, type){
    toastEl.textContent = text;
    toastEl.className = "toast " + (type || "");
    toastEl.style.display = "block";
  }

  function hideToast(){
    toastEl.style.display = "none";
  }

  function isSolved(){
    for (const ch of answer) {
      if (/[A-Z]/.test(ch) && !revealed.has(ch)) return false;
    }
    return true;
  }

  function disableKeyboard(disabled=true){
    [...kbdEl.querySelectorAll(".key")].forEach(k => {
      if (disabled) k.classList.add("used");
      else k.classList.remove("used");
      k.style.pointerEvents = disabled ? "none" : "auto";
    });
  }

  // --- Guess logic ---
  function onGuess(ch, keyEl){
    if (used.has(ch)) return;
    used.add(ch);

    const hit = answer.includes(ch);
    if (hit) {
      revealed.add(ch);
      keyEl.classList.add("used","good");
      renderWord();

      if (isSolved()){
        // win
        const bonus = Math.max(0, lives) * 2; // small reward for being efficient
        score += 10 + bonus;
        solvedCount += 1;
        streak += 1;
        bestStreak = Math.max(bestStreak, streak);
        localStorage.setItem("pmpHangmanBestStreak", String(bestStreak));

        updateStats();
        showToast("✅ Solved! +10 points (plus efficiency bonus). Click “New word” for the next round.", "good");
        disableKeyboard(true);
      }
    } else {
      lives -= 1;
      keyEl.classList.add("used","bad");
      updateHealth();
      if (lives <= 0){
        // lose
        streak = 0;
        updateStats();
        renderWord(); // show partial state
        showToast("❌ Project failed. The term was: " + answer + ". Click “New word” to try again.", "bad");
        disableKeyboard(true);
      }
    }
  }

  // --- New round ---
  function newRound(){
    hideToast();
    hintEl.style.display = "none";
    btnHint.disabled = false;

    lives = MAX_LIVES;
    used = new Set();
    revealed = new Set();

    // pick a term
    const pick = BANK[Math.floor(Math.random() * BANK.length)];
    answer = pick.term.toUpperCase();

    // auto-reveal common punctuation handled in render; no need to add to revealed
    renderWord();
    updateHealth();
    updateStats();
    renderKeyboard();
    disableKeyboard(false);

    // store hint in button handler
    btnHint.onclick = () => {
      hintEl.textContent = "Hint: " + pick.hint;
      hintEl.style.display = "block";
      btnHint.disabled = true;
    };
  }

  // Buttons
  btnNew.addEventListener("click", newRound);

  // Keyboard input from physical keyboard
  window.addEventListener("keydown", (e)=>{
    const k = String(e.key || "").toUpperCase();
    if (k.length === 1 && k >= "A" && k <= "Z") {
      const keyDiv = [...kbdEl.querySelectorAll(".key")].find(x => x.textContent === k);
      if (keyDiv && !keyDiv.classList.contains("used")) onGuess(k, keyDiv);
    }
    if (e.key === "Enter") newRound();
  });

  // Start
  newRound();
</script>
</body>
</html>
